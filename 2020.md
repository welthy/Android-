[TOC]
## **Android**
### **FrameWork**
#### **IPC**
##### **说说binder机制的原理**
Binder由4部分组成：Server，Client，ServiceManager和Binder驱动。
Server：服务端。负责功能的具体实现；
Client：客户端。功能的调用方；
ServiceManager：类似于DNS，根据Client调用的服务名找到对应的Binder引用并返回给Client；
Binder驱动：类似于路由，实现进程间通信，负责Binder线程管理等。

Binder通信分为如下几步：
- Server端首先向ServiceManager注册，SMgr收到注册消息后，将其对应的名称与Binder引用存储于Map中。
- Client向SMgr发起请求，获取Server的引用。SMgr根据收到的参数查找到对应的Server端引用返回给Client，Client收到后就建立了Client与Server间的通信通道
- Client传入特定参数给Binder驱动，Binder驱动申请一定大小的内核内存空间，并与内核接收缓存及Server用户空间的接收缓存区进行内存映射。Client线程将参数传递给内核空间的接收缓存区后，线程就挂起。由于内存映射，相当于直接传递给了Server端，Server中的分配线程解析包并调用其中的方法，执行完后将结果封装到数据包中，根据内存映射传递回内核接收缓存区。Binder驱动唤醒Client线程，并传递返回的数据包，Client收到数据包后获取结果，至此完成IPC通信。



##### **android跨进程通信了解吗？共享内存用过吗？binder怎么验证pid?binder驱动了解吗？**  
Binder数据传输时会将调用方的pid和uid封装到数据包中，Server可以通过getCallingPid()/getCallingUid()获取到调用方的pid或uid，然后进行特定的校验。  
也可以通过Binder.clearCallingIndenity()清除调用方的uid/pid。  
可以清除也可以通过Binder.restoreCallingIndentity(token)恢复调用方的uid/pid


##### **binder进程间通信可以调用原进程方法吗？**  
可以，相当于Client已知Server端的引用，无需通过SMgr就有通信通道。

##### **AIDL in out oneWay代表什么意思？**  
- in：只允许数据向Server输入；
- out：只允许数据从Server输出；
- inout：数据可从Server输出也可输入；
- oneway：代表方法是异步调用。

##### **跨进程通信了解多少？管道了解吗？**
IPC方式：Socket，信号量，管道，Binder，共享内存

#### **Handler**  
##### **Handler问题三连：是什么？有什么用？为什么要用Handler，不用行不行？**  

##### **真的只能在主(UI)线程中更新UI吗？**  

##### **真的不能在主(UI)线程中执行网络操作吗？** 

##### **为什么建议使用Message.obtain()来创建Message实例？** 

##### **为什么子线程中不可以直接new Handler()而主线程中可以？** 

##### **主线程给子线程的Handler发送消息怎么写？** 
##### **HandlerThread实现的核心原理？** 
##### **当你用Handler发送一个Message，发生了什么？** 
##### **分发给Handler的消息是怎么处理的？** 
##### **IdleHandler是什么？** 
##### **Looper在主线程中死循环，为啥不会ANR？** 
##### **Handler泄露的原因及正确写法** 
##### **Handler中的同步屏障机制** 

## **Java**







